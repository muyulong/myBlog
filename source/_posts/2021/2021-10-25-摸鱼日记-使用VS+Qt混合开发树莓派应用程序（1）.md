---
title: 摸鱼日记-使用VS+Qt混合开发树莓派应用程序（1）
categories: 技术
tags:
  - 摸鱼
  - 树莓派
description: 毕业设计！
cover: 'https://gitee.com/muyulong/blogpic/raw/master/image/202110261435984.jpg'
abbrlink: 89461a1a
password: 20000505
date: 2021-10-25 19:16:55
---
{% note warning flat %}
本文含有下饭摸鱼行为及低质量代码，如您感到不适请立即关闭。
{% endnote %}

## 10月25日 初试vs+qt

上周，海鸥老师找了我做毕业设计，有点激动也有点紧张，现在课题下来了，和毛毛一起做一个大课题，毛毛负责节点部分，我负责网关部分。

<img src="https://gitee.com/muyulong/blogpic/raw/master/image/202110302151111.png" alt="" style="zoom:67%;" />

要求用qt在树莓派上开发一个网关系统，能够远程控制节点，一头雾水，不知道怎么做。

<img src="https://gitee.com/muyulong/blogpic/raw/master/image/202110302153269.jpeg" alt="" style="zoom: 67%;" />

先画了几个简陋的设计图，用思维导图理了一下思路，然后决定先动手试试。

<img src="https://gitee.com/muyulong/blogpic/raw/master/image/202110302154598.png" alt="" style="zoom:67%;" />

以前只用过qt开发win小程序，没做过大的项目，先百度，辣鸡百度一堆没用的信息，转到Google，找到了一篇博文，介绍了使用vs在树莓派上进行交叉编译开发的方法。

[**博文链接**](http://etrd.org/2017/02/19/%E6%90%AD%E5%BB%BA%E6%A0%91%E8%8E%93%E6%B4%BE3%E4%B8%8A%E7%9A%84QT%E7%8E%AF%E5%A2%83%E5%B9%B6%E4%BD%BF%E7%94%A8VS%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%BC%80%E5%8F%91%E7%9A%84%E6%96%B9%E6%B3%95/)

经过一番~~艰难~~的操作，给树莓派装上了lite系统并配置好了qt5。

下面就是连接pc开发机和树莓派了，用的是[visualGDB](https://visualgdb.com/)软件，十分强大的软件，但是只能试用30天，还不够做完毕设，只能损害一下软件作者的利益了。

感谢看雪论坛的bcyj大佬，制作了强大的序列号计算器。

[**论坛帖子链接**](https://bbs.pediy.com/thread-255041.htm)

一番折腾之后终于连通了，用qt designer画了一个简陋的界面，跑了一下，成功了。

<img src="https://gitee.com/muyulong/blogpic/raw/master/image/202110302200704.png" alt="" style="zoom:67%;" />

今天到此结束。

今天摸了小鱼。

## 10月26日 摸鱼的一天

整理了一下博客文章，把之前挖的坑填了几个，目前应该还剩几个小坑。

优化了一下博客显示评论的头像，发现用的评论系统当初部署的时候是以团队形式部署的，现在要付费，果断删除，换成免费的个人形式部署。

树莓派右上角有小闪电，说明供电不够，查了需要3a，手头上没有3a线，淘宝下单，明天应该就到了。

今天摸了大鱼。

## 10月27日 今天不能摸鱼

考虑到可能会有图形绘制的需求，决定学习一下qt绘图。一开始想试试opengl，发现opengl虽然能绘制3d图像，但是有些麻烦，而且我要开发的程序更适合使用2d绘制。

学习qt里面的qpainter，看了霍亚飞的qt快速入门，照着画一些基本的2d图形应该没什么问题。还需要把图形的交互做出来。

重新设计了一下软件的界面，继续用思维导图理清思路，把功能区重新规划了一下，查看日志和综合监控按钮移到左侧，计划任务和定时功能合并，直接做到右边功能区。思维导图也对应修改了一下。

图形绘制计划用在综合监控上，原本是计划用3d绘制一个场景，可以用鼠标点击对应的区域查看和控制节点的，过于麻烦，决定换成2d绘制。

树莓派的3a线到了，终于没有小闪电了，虽然对程序运行没有任何影响，但是可以作为拖延的借口。

今天没怎么摸鱼。

## 10月28日 今天也不摸鱼

深思熟虑之后，决定先暂停图形绘制的方法，转而寻求更好的方法或者不开发综合监控功能。主要原因是综合监控和原本的节点控制功能重复了，没有实际意义，次要原因是难以给qpainter绘制的图形做点击事件。

计划中的日志功能要好好开发，准备将日志存储到数据库中，方便随时查看和调用。

能通过对部分操作日志进行点击操作，快速设置当前状态。

有一个想法，用日志详细地记录每一个操作，这样在程序关闭后再次启动，就能通过读取最新的一条记录来快速恢复到上次运行的状态了。在下位机上设置一个状态机，下位机正常运行时，状态置0，不正常时，状态置1。上位机程序打开时读取下位机状态，如果是0，就读取日志最新纪录，快速恢复；如果是1，就发送初始化指令，同时令上位机程序和下位机节点进行初始化。

## 10月29日 今天大摸鱼

上午睡觉，中午吃饭，下午先更新了一下xbox游戏，发现《僚机计划》进xgp主机端了，体验完之后，我的评价是：不行，感觉不如皇牌空战。。。画质。之后打开《绯红结系》，继续推了一章。听说《漫威复仇者联盟》进xgp了，下载下来体验一番，确实不错，中文配音很赞，打击手感很不错，配合xbox手柄的震动，非常棒。

今天摸了大鱼。

## 10月30日 今天不摸鱼

适之啊适之，不能再摸鱼了！

结果还是摸了大鱼。

